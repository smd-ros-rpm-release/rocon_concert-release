<launch>
  <arg name="concert_name" default="concert_master"/>
  <node pkg="rocon_hub" type="hub.py" name="hub">
    <rosparam command="load" file="$(find rocon_hub)/param/default.yaml" />
    <param name="name" value="$(arg concert_name)"/>
  </node>
  <node ns="zeroconf" pkg="zeroconf_avahi" type="zeroconf" name="zeroconf"/>
  <node pkg="rocon_gateway" type="gateway.py" name="gateway">
    <rosparam command="load" file="$(find rocon_gateway)/param/default.yaml"/>
    <rosparam command="load" file="$(find rocon_gateway)/param/default_blacklist.yaml"/>
    <param name="name" value="$(arg concert_name)"/>
    <param name="firewall" value="false"/>
    <param name="watch_loop_period" value="10.0"/>
    <param name="hub_whitelist" value="[$(arg concert_name)]"/>
  </node>
  <node pkg="concert_master" type="concerto.py" name="concert_master" output="screen">
    <remap from="concert_master/gateway_info" to="gateway/gateway_info"/>
    <param name="hub_whitelist" value="[$(arg concert_name)]"/>
  </node>
  <node pkg="concert_conductor" type="conductor.py" name="conductor" output="screen">
    <remap from="conductor/gateway_info" to="gateway/gateway_info"/>
    <remap from="conductor/remote_gateway_info" to="gateway/remote_gateway_info"/>
    <remap from="conductor/pull" to="gateway/pull"/>
    <remap from="conductor/flip" to="gateway/flip"/>
    <rosparam command="load" file="$(find concert_conductor)/param/default.yaml"/>
  </node>
</launch>
